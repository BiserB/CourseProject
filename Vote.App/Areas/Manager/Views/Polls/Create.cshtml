@model PollBindingModel
@{
    ViewData["Title"] = "Create";
}


<div class="row">
    <div class="col-md-6 ask-section">
        <div class="container">
            <h1 class="h4 ml-auto mr-auto mt-md-2"><span class="code-mutted mx-3">@Model.EventCode</span> <strong>@Model.EventTitle</strong> </h1>
            <hr />
            <h2 class="h5">Ask a question for poll:</h2>
            <form asp-area="manager" asp-controller="polls" asp-action="create" class="form" method="post">
                <div>

                </div>
                <input asp-for="EventId" type="hidden">
                <input asp-for="EventCode" type="hidden">
                <input asp-for="EventTitle" type="hidden">

                <div class="form-group ask-form">
                    <label asp-for="PollQuestion" class="sr-only"></label>
                    <textarea asp-for="PollQuestion" class="form-control" maxlength="256" rows="3"></textarea>
                    <span asp-validation-for="PollQuestion" class="text-danger"></span>
                </div>

                <hr />
                <h2 class="h5">Poll answers:</h2>
                <div id="answers">
                    <div class="form-group ask-form answer">
                        <label for="answer1" class="sr-only"></label>
                        <textarea id="answer1" name="answers" class="form-control answer" maxlength="256" rows="1"></textarea>
                        <span class="text-danger"></span>
                    </div>

                    <div class="form-group ask-form answer">
                        <label for="answer2" class="sr-only"></label>
                        <textarea id="answer2" name="answers" class="form-control answer" maxlength="256" rows="1"></textarea>
                        <span class="text-danger"></span>
                    </div>
                </div>
                <div class="text-muted text-left ml-2">maximum 6 answers</div>
                <div class="row">
                    <div class="col-6 text-left">
                        <label class="btn btn-outline-dark" onclick="AddAnswer();">Add another answer</label>
                    </div>
                    <div class="col-6 text-right">
                        <button type="submit" class="btn btn-secondary">SAVE</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <div class="col-md-6">
        <div class="row text-center questions-header">
            <h4>@Model.Answers.Count Optional Answers: </h4>
        </div>
        <div class="row">
            <div id="posts" class="questions">
                @{
                    foreach (var answer in Model.Answers)
                    {
                        <div>
                            @answer
                        </div>
                        <hr />
                    }
                }
            </div>
        </div>

    </div>
</div>

<script>
    function AddAnswer() {
        var answersCount = document.getElementsByClassName("form-control answer").length + 1;

        if (answersCount > 6) {
            return;
        }

        var nameValue = 'answer' + answersCount;

        var textarea = document.createElement('textarea');
        textarea.setAttribute('id', nameValue);
        textarea.setAttribute('name', 'answers');
        textarea.setAttribute('rows', '1');
        textarea.setAttribute('maxlength', '256');
        textarea.setAttribute('class', 'form-control answer'); 
                
        var div = document.createElement('div');
        div.setAttribute('class', 'form-group ask-form answer');
        div.appendChild(textarea);
        
        document.getElementById('answers').appendChild(div);
    }
</script>



