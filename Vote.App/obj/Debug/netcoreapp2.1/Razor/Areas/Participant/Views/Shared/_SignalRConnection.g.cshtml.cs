#pragma checksum "D:\CSharp\FinalProject\Vote.App\Areas\Participant\Views\Shared\_SignalRConnection.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "f77a0ef8bcd1f6e87d75bfe694064663418a6158"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Areas_Participant_Views_Shared__SignalRConnection), @"mvc.1.0.view", @"/Areas/Participant/Views/Shared/_SignalRConnection.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Areas/Participant/Views/Shared/_SignalRConnection.cshtml", typeof(AspNetCore.Areas_Participant_Views_Shared__SignalRConnection))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "D:\CSharp\FinalProject\Vote.App\Areas\Participant\Views\_ViewImports.cshtml"
using Vote.App;

#line default
#line hidden
#line 2 "D:\CSharp\FinalProject\Vote.App\Areas\Participant\Views\_ViewImports.cshtml"
using Vote.Common.ViewModels.Polls;

#line default
#line hidden
#line 3 "D:\CSharp\FinalProject\Vote.App\Areas\Participant\Views\_ViewImports.cshtml"
using Vote.Common.ViewModels.Events;

#line default
#line hidden
#line 4 "D:\CSharp\FinalProject\Vote.App\Areas\Participant\Views\_ViewImports.cshtml"
using Vote.Common.BindingModels;

#line default
#line hidden
#line 5 "D:\CSharp\FinalProject\Vote.App\Areas\Participant\Views\_ViewImports.cshtml"
using Vote.Common.ViewModels;

#line default
#line hidden
#line 6 "D:\CSharp\FinalProject\Vote.App\Areas\Participant\Views\_ViewImports.cshtml"
using Vote.Entities;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"f77a0ef8bcd1f6e87d75bfe694064663418a6158", @"/Areas/Participant/Views/Shared/_SignalRConnection.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"90692d05df0b654536d723e5a4869591ffb40f27", @"/Areas/Participant/Views/_ViewImports.cshtml")]
    public class Areas_Participant_Views_Shared__SignalRConnection : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            BeginContext(0, 4794, true);
            WriteLiteral(@"<script>

    (async function () {
        const connection = new signalR.HubConnectionBuilder()
            .withUrl(""/questions"")
            .build();

        connection.on(""Callback"", (questionContent, publishedOn, authorName, id, eventId, eventCode) => {

            var postHtml = [
                '<div class=""mr-3"">' + questionContent + '</div>',
                '<div class=""row mx-0""><span class=""content-mutted"">' + publishedOn + '</span>',
                '<span class=""ml-3"">' + authorName + '</span>',
                '<span class=""ml-auto mr-3"">',
                '<span id=""button' + id + '""></span>',
                '<a data-toggle=""collapse"" href=""#postReply' + id + '"" role=""button"" aria-expanded=""false""',
                'aria-controls=""postReply' + id + '"" ><i class=""icon-reply""></i></a></span></div>',

                '<div class=""collapse"" id=""postReply' + id + '""><div class=""reply-form"">',
                '<form method=""post"" class=""mr-3 ml-auto"" action=""/participant/repl");
            WriteLiteral(@"ies/post"">',
                '<div class=""form-group"">',
                '<textarea name=""replyContent"" placeholder=""Your reply ..."" rows=""2"" maxlength=""256"" data-val=""true""',
                ' data-val-length=""The ReplyContent must be at least 3 and at max 256 characters long."" data-val-length-max=""256""',
                ' data-val-length-min=""3"" data-val-required=""The ReplyContent field is required."" id=""Reply_ReplyContent""></textarea>',
                '</div><div class=""row mb-1"">',
                '<input name=""questionId"" value=""' + id + '"" data-val=""true"" data-val-required=""The QuestionId field is required."" id=""Reply_QuestionId"" type=""hidden"">',
                '<input data-val=""true"" data-val-required=""The EventId field is required."" id=""EventId' + eventId + '"" name=""EventId"" value=""' + eventId + '"" type=""hidden"">',
                '<input id=""EventCode' + eventCode + '"" name=""EventCode"" value=""' + eventCode + '"" type=""hidden"">',
                '<label class=""sr-only"" for=""Reply_ReplyAuthor");
            WriteLiteral(@""">Display name</label>',
                '<input name=""replyAuthor"" class=""author-reply border-0 ml-4 pl-2 paradiso swans-bg"" placeholder=""Anonymous"" data-val=""true""',
                ' data-val-length="" Display name must be at least 3 and at max 32 characters long."" data-val-length-max=""32"" data-val-length-min=""3""',
                ' data-val-required=""The Display name field is required."" id=""Reply_ReplyAuthor"" value="""" type=""text"">',
                '<input class=""btn btn-sm btn-outline-info ml-auto mr-2"" value=""Send"" type=""submit""></div>',
                '<input name=""__RequestVerificationToken"" value="""" type=""hidden""></form>',
                '</div>',
                '</div>',

                '<div class=""collapse mt-3"" id=""repliesFor' + id + '""></div>',

                '<hr class=""style5"" />'
            ].join('');

            var identificator = ""question"" + id;

            var div = document.createElement('div');

            div.setAttribute('id', identificator);

          ");
            WriteLiteral(@"  div.innerHTML = postHtml;

            document.getElementById('posts').appendChild(div);

        });        

        connection.on(""AddReply"", (reply) => {

            var replyHtml = [
                '<div class=""row replies"">',
                '<span>' + reply.replyContent + '</span>',
                '<span class=""ml-auto paradiso"">' + reply.replyAuthor + '</span></div><hr class=""style4"" />'
            ].join('');

            var repliesButton = [
                '<a class=""mx-2"" data-toggle=""collapse"" href=""#repliesFor' + reply.questionId +
                '"" role=""button"" aria-expanded=""false"" aria-controls=""repliesFor' + reply.questionId + '"">',
                '<span class=""font-weight-bold px-2"">R</span></a>'
            ].join('');

            var button = ""button"" + reply.questionId;

            document.getElementById(button).innerHTML = repliesButton;

            var replyDiv = document.createElement('div');

            replyDiv.innerHTML = replyHtml;

    ");
            WriteLiteral(@"        var identifictor = ""repliesFor"" + reply.questionId;

            document.getElementById(identifictor).appendChild(replyDiv);

        });

        connection.on(""DeleteQuestion"", (questionId) => {
            var identifictor = ""question"" + questionId;
            var questionElement = document.getElementById(identifictor);
            if (questionElement != null) {
                document.getElementById('posts').removeChild(questionElement);
            }            
        });

        await connection.start();

        var eventCode = document.getElementById(""EventCode"").value;

        await connection.invoke(""JoinToGroup"", eventCode);
    })();
</script>");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
